<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>结构赋值</title>
</head>
<body>
  <pre>
      解构赋值是对赋值运算符的扩展
      可以对数组或者对象进行模式匹配，然后对其中的变量进行赋值
      在书写上简洁易读，语义清晰明了，也方便了复杂对象中数据字段获取
  </pre>
  <script>
    // 数组模型的解构
    // 基本
    let [a, b, c] = [1, 2, 3]
    console.log(a, b, c);

    // 可嵌套
    let [d, [e, f] ] = [1, [2, 3] ]
    console.log(d, e, f);

    // 可忽略
    let [g, [ , l] ] = [1, [2, 3] ]
    console.log(g, l);

    // 不完全解构
    let [ h = 1, i ] = []
    console.log(h, i);

    // 剩余运算符
    let [j, ...k] = [1,2,3,4,5]
    console.log(j, k);

    // 字符串
    // 在数组的解构中，解构的目标若为可遍历对象，皆可进行解构赋值。可遍历对象即实现 Iterator 接口的数据。
    let [n, m] = 'ab'
    console.log(n, m);

    // 解构默认值
    // a 与 b 匹配结果为 undefined ，触发默认值：a = 3; b = a =3
    // a 正常解构赋值，匹配结果：a = 1，b 匹配结果 undefined ，触发默认值：b = a =1
    // a 与 b 正常解构赋值，匹配结果：a = 1，b = 2
    let [q = 3, w = q] = [];     // a = 3, b = 3
    // let [q = 3, w = q] = [1];    // a = 1, b = 1
    // let [q = 3, w = q] = [1, 2]; // a = 1, b = 2
    console.log(q, w);

    // 对象模型的解构
    // 基本
    let { foo, bar } = { foo: 'aaa', bar: 'bbb' };
    console.log(foo, bar);
    // let { baz : foo } = { baz : 'ddd' };

    // 可嵌套可忽略
    let obj = {p: ['hello', {y: 'world'}] };
    let {p: [x, { y }] } = obj;
    // x = 'hello'
    // y = 'world'
    let obj = {p: ['hello', {y: 'world'}] };
    let {p: [x, {  }] } = obj;
    // x = 'hello'

    // 不完全解构
    let obj = {p: [{y: 'world'}] };
    let {p: [{ y }, x ] } = obj;
    // x = undefined
    // y = 'world'

    // 剩余运算符
    let {a, b, ...rest} = {a: 10, b: 20, c: 30, d: 40};
    // a = 10
    // b = 20
    // rest = {c: 30, d: 40}
    
    // 解构默认值
    let {a = 10, b = 5} = {a: 3};
    // a = 3; b = 5;
    let {a: aa = 10, b: bb = 5} = {a: 3};
    // aa = 3; bb = 5;
  </script>
</body>
</html>